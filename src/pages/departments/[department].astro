---
import Card from "../../components/Card.astro";
import LinkCard from "../../components/LinkCard.astro";
import { departments } from "../../data/departments.json";
import Layout from "../../layouts/Layout.astro";
export async function getStaticPaths() {
  return departments.map((department) => {
    return {
      params: { department: department.name.replace(" ", "-").toLowerCase() },
      props: {
        name: department.name,
        imageUrl: department.imageUrl,
        content: department.content,
        items: department.items,
      },
    };
  });
}

const { name, imageUrl, content, items } = Astro.props;
---

<Layout
  title={name}
  active="departments"
  header={name}
  backTo="Departments"
  backToLink={`${import.meta.env.BASE_URL}departments`}
>
  <main class="w-full flex flex-col mt-10">
    <Card
      title={name}
      content={content}
      imageUrl={`${import.meta.env.BASE_URL}${imageUrl}`}
      imageFirst={true}
      imageSpan={5}
    />

    <div class="flex flex-col gap-5 lg:flex-row w-3/4 mx-auto mb-10">
      {
        items.map((item) => (
          <LinkCard
            title={item.title}
            icon={item.icon}
            href={item.href}
            imageAspectRatio="aspect-square"
            width="w-full lg:w-1/5"
            imageWidth="w-full"
          />
        ))
      }
    </div>
  </main>
</Layout>
